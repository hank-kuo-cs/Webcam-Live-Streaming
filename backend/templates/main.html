<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link href="http://cdn.bootcss.com/video.js/6.0.0-RC.5/alt/video-js-cdn.min.css" rel="stylesheet">
        <script src="http://cdn.bootcss.com/video.js/6.0.0-RC.5/video.js"></script>
        <script src="http://cdn.bootcss.com/videojs-contrib-hls/5.3.3/videojs-contrib-hls.js"></script>

        <title>HW4</title>
        <style>
            video {
                width: 96%;
                height: 64%;
                min-width: 480px;
                min-height: 320px;
            }

            body {
                background-color: linen;
                font-family: sans-serif;
            }

            h1 {
                text-align: center;
                font-family: Georgia;
            }

            .content {
                float: left;
                margin-top: 100px;
                margin-left: 10%;
                display: block;
                width: 40%;
                min-width: 500px;
            }

            .custom_button {
                background-color: #4CAF50; /* Green */
                border: none;
                color: white;
                padding: 15px 32px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 16px;
            }
            .custom_button:hover {
                background-color: #9CCFC0; /* Green */
                color: white;
            }

            input {
                border: 2px solid black;
                outline: 0;
                margin-bottom: 20px;
                width: 200px;
                height: 40px;
            }
        </style>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    </head>
    <body>
        <h1>Live Video Streaming</h1>
        <hr>
        <div class="content">
            <video id="hls-video" class="video-js vjs-default-skin"
                   playsinline webkit-playsinline autoplay controls preload="auto"
                   x-webkit-airplay="true" x5-video-player-fullscreen="true" x5-video-player-typ="h5">
                <source src="http://140.113.86.64/NCTU/test_det/hls_360p.m3u8" type="application/x-mpegURL">
            </video>
        </div>
        <div class="content">
            <h2>Tracking ID</h2>
            <input type="text" id="id_text">
            <div></div>
            <button class="custom_button">Confirm</button>
        </div>
    </body>
</html>
<script>
$(document).ready(function(){
    $(".custom_button").click(function(){
        var id_text = $("#id_text").val();
	$(function() {
	    $.ajax({
	        url: 'http://140.113.86.64:10008/api/track/updateID',
		type: 'POST',
		cache: false,
		dataType: 'json',
		contentType: 'application/json',
		data: JSON.stringify({id: id_text}),
		success: function(data){console.log(data)}
	    })
	})
    });
});
</script>
<script>
    var player = videojs('hls-video');
    player.play();
</script>
